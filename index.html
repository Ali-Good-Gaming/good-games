<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sapper Ultimate Elite | ALI_GOOD_GAMING</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Montserrat:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-body: #0a0b10;
            --bg-card: #12141d;
            --bg-board: #050608;
            --primary: #00d2ff;
            --primary-glow: rgba(0, 210, 255, 0.5);
            --text-main: #ffffff;
            --cell-idle: #1c1f2b;
            --cell-border: #2d3142;
            --font-display: 'Orbitron', sans-serif;
            --font-main: 'Montserrat', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* –¢–ï–ú–´ */
        [data-theme="neon"] { --primary: #e94560; --primary-glow: rgba(233, 69, 96, 0.5); }
        [data-theme="ocean"] { --primary: #00d2ff; --primary-glow: rgba(0, 210, 255, 0.5); }
        [data-theme="emerald"] { --primary: #00ff88; --primary-glow: rgba(0, 255, 136, 0.5); }
        [data-theme="gold"] { --primary: #f1c40f; --primary-glow: rgba(241, 196, 15, 0.5); }
        [data-theme="blood"] { --primary: #ff4757; --primary-glow: rgba(255, 71, 87, 0.5); }

        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            font-family: var(--font-main);
            height: 100vh; width: 100vw;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            transition: background 0.5s ease;
        }

        #particle-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }

        #app-root { position: relative; z-index: 10; width: 100%; display: flex; flex-direction: column; align-items: center; }

        .screen { display: none; flex-direction: column; align-items: center; width: 100%; max-width: 600px; opacity: 0; transform: translateY(20px); transition: var(--transition); }
        .screen.active { display: flex; opacity: 1; transform: translateY(0); }

        .main-logo {
            font-family: var(--font-display);
            font-size: clamp(2.5rem, 10vw, 4.5rem);
            font-weight: 900;
            text-transform: uppercase;
            background: linear-gradient(to bottom, #fff, var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 15px var(--primary-glow));
            margin-bottom: 5px;
            letter-spacing: -2px;
        }

        .brand-sub { font-family: var(--font-mono); font-size: 0.75rem; color: var(--primary); margin-bottom: 20px; letter-spacing: 5px; text-shadow: 0 0 10px var(--primary-glow); }

        .menu-grid { display: flex; flex-direction: column; gap: 12px; width: 300px; }

        .action-btn {
            background: var(--bg-card); border: 1px solid var(--cell-border);
            color: #fff; padding: 14px; font-family: var(--font-display);
            border-radius: 12px; cursor: pointer; transition: var(--transition);
            text-transform: uppercase; font-size: 0.85rem;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .action-btn:hover { border-color: var(--primary); transform: translateY(-3px); box-shadow: 0 6px 20px var(--primary-glow); }
        .action-btn.hero { background: var(--primary); color: #000; border: none; font-weight: 800; }

        /* –°–û–¶ –°–ï–¢–ò */
        .social-row { display: flex; gap: 10px; margin-top: 25px; width: 300px; }
        .social-btn {
            flex: 1; height: 50px; border-radius: 12px; display: flex; justify-content: center; align-items: center;
            font-size: 1.2rem; color: white; background: var(--bg-card); border: 1px solid var(--cell-border);
            transition: var(--transition); cursor: pointer; text-decoration: none;
        }
        .social-btn.yt:hover { background: #ff0000; border-color: #ff0000; box-shadow: 0 0 15px rgba(255,0,0,0.4); }
        .social-btn.tt:hover { background: #000; border-color: #fff; box-shadow: 0 0 15px rgba(255,255,255,0.2); }
        .social-btn.tg:hover { background: #0088cc; border-color: #0088cc; box-shadow: 0 0 15px rgba(0,136,204,0.4); }

        .game-top-bar {
            width: 95%; display: flex; justify-content: space-between; align-items: center;
            background: var(--bg-card); padding: 12px 20px;
            border-radius: 15px; border: 1px solid var(--cell-border); margin-bottom: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
        }

        .stat-value { font-family: var(--font-mono); font-size: 1.2rem; color: var(--primary); font-weight: bold; }

        #game-grid {
            display: grid; gap: 5px; background: var(--bg-board);
            padding: 10px; border-radius: 12px; border: 1px solid var(--cell-border);
            max-width: 98vw; max-height: 70vh; overflow: auto;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.8);
        }

        .game-cell {
            width: 34px; height: 34px; background: var(--cell-idle); border-radius: 4px;
            display: flex; justify-content: center; align-items: center;
            font-weight: 900; cursor: pointer; font-size: 1rem;
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275), background 0.3s ease;
            border: 1px solid rgba(255,255,255,0.03);
            perspective: 1000px;
        }
        .game-cell:active { transform: scale(0.8); }
        
        .game-cell.is-revealed { 
            background: rgba(255,255,255,0.05); 
            cursor: default; 
            border-color: transparent;
            animation: revealPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        @keyframes revealPop {
            0% { transform: scale(0.3) rotateX(-90deg); opacity: 0; filter: brightness(2); }
            100% { transform: scale(1) rotateX(0deg); opacity: 1; filter: brightness(1); }
        }

        .game-cell.is-mine { background: #ff4757 !important; color: white; animation: shake 0.4s ease; box-shadow: 0 0 20px #ff4757; }
        .game-cell.is-flagged::after { content: 'üö©'; font-size: 0.8rem; animation: pop 0.2s forwards; }

        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        @keyframes pop { from { transform: scale(0); } to { transform: scale(1.2); } }

        .modal-wrap {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(10px);
            z-index: 1000; display: none; justify-content: center; align-items: center;
        }

        .modal-body {
            background: var(--bg-card); border: 2px solid var(--primary);
            padding: 30px; border-radius: 20px; text-align: center; width: 90%; max-width: 400px;
            animation: modalIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        @keyframes modalIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        .config-select {
            width: 100%; background: #000; color: white; border: 1px solid var(--cell-border);
            padding: 12px; border-radius: 10px; margin-bottom: 15px; font-family: var(--font-main); outline: none;
        }

        #hint-btn { position: relative; background: linear-gradient(45deg, #f1c40f, #e67e22); color: #000; font-weight: 800; border: none; }
        .hint-count {
            position: absolute; top: -8px; right: -8px; background: #ff4757; color: #fff;
            padding: 4px 8px; border-radius: 10px; font-size: 0.7rem; border: 2px solid var(--bg-card);
        }

        .video-container { width: 100%; aspect-ratio: 9/16; background: #000; border-radius: 12px; margin: 15px 0; overflow: hidden; position: relative; }
        .ad-timer { position: absolute; bottom: 15px; left: 15px; background: rgba(0,0,0,0.85); padding: 6px 12px; border-radius: 6px; font-size: 0.8rem; color: var(--primary); }

        .n-1 { color: #3498db; } .n-2 { color: #2ecc71; } .n-3 { color: #e74c3c; } .n-4 { color: #9b59b6; }
        .n-5 { color: #f1c40f; } .n-6 { color: #1abc9c; } .n-7 { color: #ecf0f1; } .n-8 { color: #95a5a6; }
    </style>
</head>
<body data-theme="ocean">

    <canvas id="particle-canvas"></canvas>

    <div id="app-root">
        <!-- –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ -->
        <section id="menu-screen" class="screen active">
            <h1 class="main-logo">Sapper</h1>
            <div class="brand-sub">ALI_GOOD_GAMING</div>
            <nav class="menu-grid">
                <button class="action-btn hero" id="btn-play" onclick="Engine.launchGame()"><i class="fas fa-play"></i> –ò–ì–†–ê–¢–¨</button>
                <button class="action-btn" id="btn-records" onclick="UI.showRecords()"><i class="fas fa-trophy"></i> –†–ï–ö–û–†–î–´</button>
                <button class="action-btn" id="btn-settings" onclick="UI.openSettings()"><i class="fas fa-cog"></i> –ù–ê–°–¢–†–û–ô–ö–ò</button>
            </nav>
            
            <!-- –°–û–¶ –°–ï–¢–ò -->
            <div class="social-row">
                <a href="https://youtube.com/@ali-gg?si=IXALYlv1-uPQxshb" target="_blank" class="social-btn yt"><i class="fab fa-youtube"></i></a>
                <a href="https://www.tiktok.com/@ali_goodgaming?_r=1&_t=ZS-92b9C1Mzuce" target="_blank" class="social-btn tt"><i class="fab fa-tiktok"></i></a>
                <a href="https://t.me/aligoodgaming" target="_blank" class="social-btn tg"><i class="fab fa-telegram-plane"></i></a>
            </div>
        </section>

        <!-- –≠–ö–†–ê–ù –ò–ì–†–´ -->
        <section id="game-screen" class="screen">
            <header class="game-top-bar">
                <div id="mine-display" class="stat-value">üí£ 0</div>
                <div class="action-btn" style="padding: 10px; border-radius: 50%" onclick="GameCore.reset(); Engine.play('click')"><i class="fas fa-redo"></i></div>
                <div id="time-display" class="stat-value">‚è≥ 00:00</div>
            </header>
            <div id="game-grid"></div>
            <footer style="margin-top: 20px; display: flex; gap: 12px; width: 95%;">
                <button class="action-btn" style="flex: 1;" id="btn-menu" onclick="Engine.exitToMenu()">–ú–ï–ù–Æ</button>
                <button class="action-btn" id="hint-btn" style="flex: 1;" onclick="GameCore.useHint()">
                    <i class="fas fa-lightbulb"></i> <span id="label-hint">–ü–û–ú–û–©–¨</span>
                    <div class="hint-count" id="hint-count-badge">0</div>
                </button>
            </footer>
        </section>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û -->
    <div id="global-modal" class="modal-wrap">
        <div class="modal-body" id="modal-content"></div>
    </div>

<script>
/**
 * –°–ò–°–¢–ï–ú–ê –õ–û–ö–ê–õ–ò–ó–ê–¶–ò–ò
 */
const CONFIG = {
    ru: {
        play: "–ò–ì–†–ê–¢–¨", records: "–†–ï–ö–û–†–î–´", settings: "–ù–ê–°–¢–†–û–ô–ö–ò", menu: "–ú–ï–ù–Æ",
        hint: "–ü–û–ú–û–©–¨", win: "–ü–û–ë–ï–î–ê!", lose: "–ë–£–ú!", time: "–í—Ä–µ–º—è: ", scale: "–ú–ê–°–®–¢–ê–ë –ü–û–õ–Ø",
        theme: "–¶–í–ï–¢–û–í–ê–Ø –¢–ï–ú–ê", lang: "–Ø–ó–´–ö", adTitle: "–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?", 
        adText: "–ü–æ—Å–º–æ—Ç—Ä–∏ —Ä–æ–ª–∏–∫ ALI_Good_Gaming, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å +1 –ø–æ–¥—Å–∫–∞–∑–∫—É.",
        watch: "–°–ú–û–¢–†–ï–¢–¨", cancel: "–û–¢–ú–ï–ù–ê", back: "–û–ö", save: "–°–û–•–†–ê–ù–ò–¢–¨",
        empty: "–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç", audio: "–ó–í–£–ö–û–í–´–ï –≠–§–§–ï–ö–¢–´", on: "–í–ö–õ", off: "–í–´–ö–õ"
    },
    en: {
        play: "PLAY", records: "RECORDS", settings: "SETTINGS", menu: "MENU",
        hint: "HINT", win: "VICTORY!", lose: "BOOM!", time: "Time: ", scale: "FIELD SCALE",
        theme: "COLOR THEME", lang: "LANGUAGE", adTitle: "Need Help?", 
        adText: "Watch ALI_Good_Gaming's short to get +1 hint.",
        watch: "WATCH", cancel: "CANCEL", back: "OK", save: "SAVE",
        empty: "List is empty", audio: "SOUND EFFECTS", on: "ON", off: "OFF"
    }
};

const DIFFICULTIES = {
    easy: { rows: 10, cols: 10, mines: 10, hints: 3 },
    med: { rows: 16, cols: 16, mines: 40, hints: 10 },
    hard: { rows: 20, cols: 20, mines: 80, hints: 15 }
};

const SHORTS_DB = ["dQw4w9WgXcQ", "3JZ_D3ELwOQ", "9bZkp7q19f0", "2Vv-BfVoq4g", "kJQP7kiw5Fk"];

/**
 * –Ø–î–†–û –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
 */
const Engine = {
    lang: 'ru',
    diff: 'easy',
    audio: true,

    init() {
        this.updateLang();
        Particles.init();
    },

    updateLang() {
        const t = CONFIG[this.lang];
        document.getElementById('btn-play').innerHTML = `<i class="fas fa-play"></i> ${t.play}`;
        document.getElementById('btn-records').innerHTML = `<i class="fas fa-trophy"></i> ${t.records}`;
        document.getElementById('btn-settings').innerHTML = `<i class="fas fa-cog"></i> ${t.settings}`;
        document.getElementById('btn-menu').textContent = t.menu;
        document.getElementById('label-hint').textContent = t.hint;
    },

    play(type) {
        if(!this.audio) return;
        try {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain); gain.connect(ctx.destination);
            if(type === 'click') {
                osc.frequency.setValueAtTime(500, ctx.currentTime);
                gain.gain.setValueAtTime(0.1, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.1);
                osc.start(); osc.stop(ctx.currentTime + 0.1);
            } else if(type === 'boom') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(100, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1, ctx.currentTime + 0.5);
                gain.gain.setValueAtTime(0.2, ctx.currentTime);
                gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.5);
                osc.start(); osc.stop(ctx.currentTime + 0.5);
            }
        } catch(e) {}
    },

    launchGame() {
        this.play('click');
        document.getElementById('menu-screen').classList.remove('active');
        document.getElementById('game-screen').classList.add('active');
        GameCore.reset();
    },

    exitToMenu() {
        this.play('click');
        document.getElementById('game-screen').classList.remove('active');
        document.getElementById('menu-screen').classList.add('active');
        clearInterval(GameCore.timer);
    }
};

/**
 * –õ–û–ì–ò–ö–ê –ò–ì–†–´
 */
const GameCore = {
    grid: [], active: false, timer: null, sec: 0, first: true, flags: 0, hints: 0,

    reset() {
        const d = DIFFICULTIES[Engine.diff];
        this.active = true; this.first = true; this.sec = 0; this.flags = 0;
        this.hints = d.hints;
        clearInterval(this.timer);
        this.updateHUD();
        this.build();
    },

    build() {
        const d = DIFFICULTIES[Engine.diff];
        const container = document.getElementById('game-grid');
        container.innerHTML = '';
        container.style.gridTemplateColumns = `repeat(${d.cols}, 1fr)`;
        this.grid = [];
        for(let r=0; r<d.rows; r++) {
            this.grid[r] = [];
            for(let c=0; c<d.cols; c++) {
                const el = document.createElement('div');
                el.className = 'game-cell';
                el.onclick = () => this.click(r, c);
                el.oncontextmenu = (e) => { e.preventDefault(); this.flag(r, c); };
                container.appendChild(el);
                this.grid[r][c] = { r, c, mine: false, open: false, flag: false, count: 0, el };
            }
        }
    },

    click(r, c) {
        if(!this.active || this.grid[r][c].flag || this.grid[r][c].open) return;
        
        if(this.first) {
            Engine.play('click');
            this.first = false;
            this.generate(r, c);
            this.timer = setInterval(() => { this.sec++; this.updateHUD(); }, 1000);
        }
        
        const cell = this.grid[r][c];
        if(cell.mine) {
            Engine.play('boom');
            this.revealCellUI(cell);
            this.gameOver(false);
        } else {
            Engine.play('click');
            this.openCascade(r, c);
        }
        this.checkWin();
    },

    generate(safeR, safeC) {
        const d = DIFFICULTIES[Engine.diff];
        let placed = 0;
        while(placed < d.mines) {
            let rr = Math.floor(Math.random() * d.rows);
            let cc = Math.floor(Math.random() * d.cols);
            if(!this.grid[rr][cc].mine && (Math.abs(rr-safeR)>1 || Math.abs(cc-safeC)>1)) {
                this.grid[rr][cc].mine = true;
                placed++;
            }
        }
        for(let r=0; r<d.rows; r++) {
            for(let c=0; c<d.cols; c++) {
                if(this.grid[r][c].mine) continue;
                let count = 0;
                for(let i=-1; i<=1; i++) {
                    for(let j=-1; j<=1; j++) if(this.grid[r+i]?.[c+j]?.mine) count++;
                }
                this.grid[r][c].count = count;
            }
        }
    },

    useHint() {
        if(!this.active) return;
        Engine.play('click');
        if(this.hints <= 0) { UI.showAdModal(); return; }

        const closedSafe = this.grid.flat().filter(c => !c.mine && !c.open);
        if(closedSafe.length > 0) {
            const cell = closedSafe[Math.floor(Math.random() * closedSafe.length)];
            this.hints--;
            this.updateHUD();
            this.revealCellUI(cell);
            this.checkWin();
        }
    },

    openCascade(r, c, delay = 0) {
        const cell = this.grid[r][c];
        if(cell.open || cell.flag) return;
        
        setTimeout(() => {
            this.revealCellUI(cell);
            if(cell.count === 0 && !cell.mine) {
                for(let i=-1; i<=1; i++) {
                    for(let j=-1; j<=1; j++) {
                        if(this.grid[r+i]?.[c+j]) {
                            this.openCascade(r+i, c+j, delay + 30);
                        }
                    }
                }
            }
            this.checkWin();
        }, delay);
    },

    revealCellUI(cell) {
        if(cell.open) return;
        cell.open = true;
        cell.el.classList.add('is-revealed');
        if(cell.mine) {
            cell.el.classList.add('is-mine');
            cell.el.innerHTML = '<i class="fas fa-bomb"></i>';
        } else if(cell.count > 0) {
            cell.el.textContent = cell.count;
            cell.el.classList.add('n-' + cell.count);
        }
    },

    flag(r, c) {
        if(!this.active || this.grid[r][c].open) return;
        Engine.play('click');
        const cell = this.grid[r][c];
        cell.flag = !cell.flag;
        cell.el.classList.toggle('is-flagged');
        this.flags += cell.flag ? 1 : -1;
        this.updateHUD();
    },

    updateHUD() {
        const d = DIFFICULTIES[Engine.diff];
        document.getElementById('mine-display').textContent = "üí£ " + (d.mines - this.flags);
        const m = Math.floor(this.sec/60).toString().padStart(2, '0');
        const s = (this.sec%60).toString().padStart(2, '0');
        document.getElementById('time-display').textContent = `‚è≥ ${m}:${s}`;
        document.getElementById('hint-count-badge').textContent = this.hints;
    },

    checkWin() {
        const d = DIFFICULTIES[Engine.diff];
        const closed = this.grid.flat().filter(c => !c.open).length;
        if(this.active && closed === d.mines) this.gameOver(true);
    },

    gameOver(win) {
        this.active = false;
        clearInterval(this.timer);
        this.grid.flat().forEach(c => { if(c.mine) this.revealCellUI(c); });
        const t = CONFIG[Engine.lang];
        UI.showStatusModal(win ? t.win : t.lose, win ? `${t.time} ${this.sec}s` : ":(");
    }
};

/**
 * –ò–ù–¢–ï–†–§–ï–ô–°
 */
const UI = {
    showStatusModal(title, text) {
        const t = CONFIG[Engine.lang];
        const content = document.getElementById('modal-content');
        content.innerHTML = `<h2>${title}</h2><p style="margin:15px 0">${text}</p><button class="action-btn hero" style="width:100%" onclick="UI.closeModal()">${t.back}</button>`;
        document.getElementById('global-modal').style.display = 'flex';
    },

    showAdModal() {
        const t = CONFIG[Engine.lang];
        const content = document.getElementById('modal-content');
        content.innerHTML = `
            <h2 style="color:#f1c40f">${t.adTitle}</h2>
            <p style="margin:15px 0; font-size:0.85rem">${t.adText}</p>
            <button class="action-btn hero" style="width:100%" onclick="UI.startAd()">${t.watch}</button>
            <button class="action-btn" style="width:100%; margin-top:10px" onclick="UI.closeModal()">${t.cancel}</button>
        `;
        document.getElementById('global-modal').style.display = 'flex';
    },

    startAd() {
        const rid = SHORTS_DB[Math.floor(Math.random() * SHORTS_DB.length)];
        const content = document.getElementById('modal-content');
        content.innerHTML = `
            <h3>ALI_Good_Gaming</h3>
            <div class="video-container">
                <iframe width="100%" height="100%" src="https://www.youtube.com/embed/${rid}?autoplay=1&controls=0" frameborder="0"></iframe>
                <div class="ad-timer" id="ad-timer">15s</div>
            </div>
        `;
        let left = 15;
        const itv = setInterval(() => {
            left--;
            const el = document.getElementById('ad-timer');
            if(el) el.textContent = left + "s";
            if(left <= 0) {
                clearInterval(itv);
                GameCore.hints++;
                GameCore.updateHUD();
                UI.showStatusModal("Done!", "+1 Hint");
            }
        }, 1000);
    },

    openSettings() {
        const t = CONFIG[Engine.lang];
        const content = document.getElementById('modal-content');
        content.innerHTML = `
            <h2>${t.settings}</h2>
            <div style="margin:15px 0; text-align:left">
                <label style="font-size:0.75rem; color:var(--primary); font-weight:800">${t.scale}</label>
                <select class="config-select" onchange="Engine.diff=this.value">
                    <option value="easy" ${Engine.diff==='easy'?'selected':''}>10x10</option>
                    <option value="med" ${Engine.diff==='med'?'selected':''}>16x16</option>
                    <option value="hard" ${Engine.diff==='hard'?'selected':''}>20x20</option>
                </select>
                <label style="font-size:0.75rem; color:var(--primary); font-weight:800">${t.theme}</label>
                <select class="config-select" onchange="document.body.setAttribute('data-theme', this.value)">
                    <option value="ocean">CYBER BLUE</option>
                    <option value="neon">NEON PINK</option>
                    <option value="emerald">EMERALD</option>
                    <option value="gold">GOLDEN LUSTRE</option>
                    <option value="blood">BLOOD MOON</option>
                </select>
                <label style="font-size:0.75rem; color:var(--primary); font-weight:800">${t.audio}</label>
                <select class="config-select" onchange="Engine.audio=(this.value==='true')">
                    <option value="true" ${Engine.audio?'selected':''}>${t.on}</option>
                    <option value="false" ${!Engine.audio?'selected':''}>${t.off}</option>
                </select>
                <label style="font-size:0.75rem; color:var(--primary); font-weight:800">${t.lang}</label>
                <select class="config-select" onchange="Engine.lang=this.value">
                    <option value="ru" ${Engine.lang==='ru'?'selected':''}>–†–£–°–°–ö–ò–ô</option>
                    <option value="en" ${Engine.lang==='en'?'selected':''}>ENGLISH</option>
                </select>
            </div>
            <button class="action-btn hero" style="width:100%" onclick="Engine.updateLang(); UI.closeModal()">${t.save}</button>
        `;
        document.getElementById('global-modal').style.display = 'flex';
    },

    showRecords() {
        const t = CONFIG[Engine.lang];
        this.showStatusModal(t.records, t.empty);
    },

    closeModal() { document.getElementById('global-modal').style.display = 'none'; }
};

/**
 * –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ô –§–û–ù –° –†–ï–ê–ö–¶–ò–ï–ô –ù–ê –ú–´–®–¨
 */
const Particles = {
    canvas: document.getElementById('particle-canvas'),
    ctx: null, dots: [], mouse: { x: null, y: null, radius: 150 },
    init() {
        this.ctx = this.canvas.getContext('2d');
        this.resize();
        window.addEventListener('resize', () => this.resize());
        window.addEventListener('mousemove', (e) => {
            this.mouse.x = e.x;
            this.mouse.y = e.y;
        });
        window.addEventListener('mouseout', () => {
            this.mouse.x = null;
            this.mouse.y = null;
        });

        for(let i=0; i<100; i++) {
            this.dots.push({
                x: Math.random() * this.canvas.width,
                y: Math.random() * this.canvas.height,
                baseX: 0, baseY: 0,
                vx: (Math.random() - 0.5) * 1.5,
                vy: (Math.random() - 0.5) * 1.5,
                size: Math.random() * 2 + 1
            });
        }
        this.animate();
    },
    resize() {
        this.canvas.width = window.innerWidth;
        this.canvas.height = window.innerHeight;
    },
    animate() {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        const color = getComputedStyle(document.body).getPropertyValue('--primary');
        this.ctx.fillStyle = color;
        this.ctx.strokeStyle = color;
        this.ctx.lineWidth = 0.5;

        for(let i=0; i<this.dots.length; i++) {
            let p = this.dots[i];
            
            // –§–∏–∑–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è
            p.x += p.vx; p.y += p.vy;
            if(p.x < 0 || p.x > this.canvas.width) p.vx *= -1;
            if(p.y < 0 || p.y > this.canvas.height) p.vy *= -1;

            // –†–µ–∞–∫—Ü–∏—è –Ω–∞ –º—ã—à—å
            if(this.mouse.x !== null) {
                let dx = this.mouse.x - p.x;
                let dy = this.mouse.y - p.y;
                let distance = Math.hypot(dx, dy);
                if(distance < this.mouse.radius) {
                    const force = (this.mouse.radius - distance) / this.mouse.radius;
                    const directionX = dx / distance;
                    const directionY = dy / distance;
                    p.x -= directionX * force * 5;
                    p.y -= directionY * force * 5;
                }
            }

            this.ctx.globalAlpha = 0.5;
            this.ctx.beginPath();
            this.ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
            this.ctx.fill();

            for(let j=i+1; j<this.dots.length; j++) {
                let p2 = this.dots[j];
                let dist = Math.hypot(p.x - p2.x, p.y - p2.y);
                if(dist < 120) {
                    this.ctx.globalAlpha = 1 - (dist / 120);
                    this.ctx.beginPath();
                    this.ctx.moveTo(p.x, p.y);
                    this.ctx.lineTo(p2.x, p2.y);
                    this.ctx.stroke();
                }
            }
        }
        requestAnimationFrame(() => this.animate());
    }
};

window.onload = () => Engine.init();
</script>
</body>
</html>

